# .clang-format

BasedOnStyle: Google

# --- General layout tweaks ---
IndentWidth: 4                # Google uses 2, but 4 is common in systems code
TabWidth: 4
UseTab: Never

# --- Braces and control flow ---
BreakBeforeBraces: Attach     # Google default
AllowShortFunctionsOnASingleLine: Inline
AllowShortIfStatementsOnASingleLine: true

# --- Alignment preferences ---
AlignConsecutiveDeclarations: true
AlignTrailingComments: true
AlignOperands: false

# --- Pointer/reference style ---
PointerAlignment: Left        # float* ptr (instead of float *ptr)
DerivePointerAlignment: false

# --- Formatting rules ---
ColumnLimit: 100              # More room for SIMD init calls
AllowShortBlocksOnASingleLine: Always
PenaltyBreakAssignment: 10
PenaltyBreakBeforeFirstCallParameter: 1

# --- Include handling ---
IncludeBlocks: Regroup
SortIncludes: true

# --- Template and initializer tweaks ---
SpacesInAngles: false
SpacesInContainerLiterals: false
Cpp11BracedListStyle: true

# --- Special case for AVX/initializer safety ---
KeepEmptyLinesAtTheStartOfBlocks: false
SpaceAfterCStyleCast: false   # For (float)x not (float) x

# --- Namespace indentation ---
NamespaceIndentation: All

# --- Experimental / advanced ---
ReflowComments: false         # Avoid rewrapping comments if hand-tuned
FixNamespaceComments: true
